<html>
<head>
<title>Dashboard</title>
</head>
<body onload="refreshData()">
	<p>EAPLI DASHBOARD</p>

	<div id = "activities">loading...</div>
        
        <!-- Lista de atividades pendentes -->
        
        
        
        
        
        <!-- lista de catalogos -->
        
        
        
        
        

<script>


function refreshData() {
    refreshCatalogs();
    refreshActivities();
}


function refreshActivities() {
	 var request = new XMLHttpRequest();
	 var acti=document.getElementById("activities");
	 request.onload = function() {
	 acti.innerHTML = this.responseText;
	 setTimeout(refreshActivities, 2000);
	 };
	 request.ontimeout = function() {
	 acti.innerHTML = "Server timeout, still trying ...";
	 setTimeout(refreshActivities, 100);
	 };
	 request.onerror = function() {
	 acti.innerHTML = "No server reply, still trying ...";
	 setTimeout(refreshActivities, 5000);
	 };
	 request.open("GET", "/stats/activities", true);
         request.timeout = 5000;
	 request.send();
}

function refreshCatalogs() {
	var request = new XMLHttpRequest();
	 var cats=document.getElementById("xpto");
	 request.onload = function() {
	 cats.innerHTML = this.responseText;
	 setTimeout(refreshCatalogs, 2000);
	 };
	 request.ontimeout = function() {
	 cats.innerHTML = "Server timeout, still trying ...";
	 setTimeout(refreshCatalogs, 100);
	 };
	 request.onerror = function() {
	 cats.innerHTML = "No server reply, still trying ...";
	 setTimeout(refreshCatalogs, 5000);
	 };
	 request.open("GET", "/stats/XPTO", true);
         request.timeout = 5000;
	 request.send();
}





</script>




</body>






